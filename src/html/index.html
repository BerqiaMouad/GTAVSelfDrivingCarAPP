<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>GTAV S.D.C</title>
    <link rel="stylesheet" href="../css/index.css">
</head>
<body>
	<section class="landing-page" >
		<div class="wrapper-loggin">
			<h2> User Login </h2>
			<form  id="login-form" action="" method="POST">
				<div class="input-box">
					<span class="icon"><ion-icon name="person"></ion-icon></span>
					<input type="text" name="username" required>
					<label>Username</label>
				</div>
				<div class="input-box">
					<span class="icon"><ion-icon name="lock-closed"></ion-icon></span>
					<input type="password" name="password" required>
					<label>Password</label>
				</div>
				<div class="remember-me">
					<label><input type="checkbox"> Remember me</label>
					<a href="#">Forgot password?</a>
				</div>
				<button type="submit" class="btn">Login</button>
				<div class="signup">
					<p> Don't have an account? <a href="./register.html">Sign up</a> </p>
				</div>
				<div id="error-message" class="error-message"></div>
			</form>
		</div>
	</section>



	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
	<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

	<script>
		const loginForm = document.getElementById('login-form');
		loginForm.addEventListener('submit', (event) => {
			event.preventDefault(); // prevent the form from submitting normally

			// get the form data
			const formData = new FormData(loginForm);

			// send an HTTP request to the login.php file
			fetch('http://localhost/GTAVSelfDrivingCar/login.php', {
				method: 'POST',
				body: formData,
				//mode: 'no-cors'
			}).then(response => response.text()).then(data => {
				// display the response from the server
				if (data === 'Wrong username or password.') {
					$('#error-message').text(data);
				} else {
					window.location.href = 'home.html';
				}
			}).catch(error => console.error(error));
		});
		
	</script>
</body>
</html>
